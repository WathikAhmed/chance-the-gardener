<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Chance the Gardener - Settings</title>

	<link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="./node_modules/bootstrap-icons/font/bootstrap-icons.css">
	<link rel="stylesheet" type="text/css" href="./style.css">

	<script src="./script.js"></script>
	<script src="./settings.js"></script>
</head>
<body>
	<div class="container-fluid">
		<div class="d-flex justify-content-between">
			<button class="btn btn-back mt-2" onclick="changePage('main-menu.html')">Back</button>
			<button class="btn mt-2" onclick="changePage('change-user.html')">Change user</button>
		</div>
		<div class="d-grid gap-2 col-sm-6 col-md-5 col-xl-4 mx-auto mt-5">
			<fieldset class="border p-3">
				<legend class="w-auto">Farm Size</legend>
				<div class="row mb-3">
					<label for="inputXAxis" class="col-5 col-form-label me-auto">X axis</label>
					<div class="col-sm-5">
						<input type="number" step=".1" class="form-control" id="inputXAxis" onchange="enableSaveBtn()" required>
					</div>
					<div class="col-sm-1 p-sm-0 align-self-center">mm</div>
				</div>
				<div class="row">
					<label for="inputYAxis" class="col-5 col-form-label me-auto">Y axis</label>
					<div class="col-sm-5">
						<input type="number" step=".1" class="form-control" id="inputYAxis" onchange="enableSaveBtn()" required>
					</div>
					<div class="col-sm-1 p-sm-0 align-self-center">mm</div>
				</div>
			</fieldset>
			<div class="row mb-3 mt-3">
				<label for="inputLightPinNum" class="col-6 col-form-label me-auto">Light pin</label>
				<div class="col-sm-5">
					<input type="number" step="1" class="form-control" id="inputLightPinNum" onchange="enableSaveBtn()" required>
				</div>
			</div>
			<div class="row mb-3 mt-3">
				<label for="inputZScanHeight" class="col-5 col-form-label me-auto">Z axis scan height</label>
				<div class="col-sm-5">
					<input type="number" step=".1" class="form-control" id="inputZScanHeight" onchange="enableSaveBtn()" required>
				</div>
				<div class="col-sm-1 p-sm-0 align-self-center d-flex">mm
					<i class="bi bi-question-circle-fill ms-2" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-html="true" title="What default height (z axis) to use for scans.<br>
					This can be also be changed per scan."></i>
				</div>
				
			</div>
		</div>
		<div class="d-grid col-sm-4 col-md-3 col-xl-2 mx-auto mb-5 mt-4">
			<div class="d-flex">
				<button class="btn btn-run col-11 ms-2" onclick="autoDetectFarmDetails()">Auto detect farm details</button>
				<i class="bi bi-question-circle-fill col-1 align-self-center ms-2" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-html="true" title="This will delete your currently saved farm details (size, light pin, and home position) and re-detect them. <br>
					Z axis can height will be left untouched. <br>
					This action cannot be undone."></i>
			</div>
			<div class="d-flex mt-5">
				<button class="btn btn-run col-11 ms-2" onclick="clearMeshroomCache()">Clear 3D render cache</button>
				<i class="bi bi-question-circle-fill col-1 align-self-center ms-2" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-html="true" title="This will clear the 3D rendering cache. <br>
					Try this if you experience issues when trying to generate a 3D garden, or want to free up some disk space.<br>
					Note that this function has only been tested on Windows."></i>
			</div>
		</div>
		<div class="d-grid col-sm-4 col-md-3 col-xl-2 mx-auto mb-5 mt-5">
			<button id="save-settings-btn" class="btn btn-success" onclick="saveSettings()" disabled>Save</button>
		</div>
	</div>
	<div class="bottom-0" aria-live="polite" aria-atomic="true" class="position-relative">
		<div class="toast-container position-absolute bottom-0 end-0 p-3">	
			<div id="autoDetectSuccessToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
				<div class="toast-header">
					<strong class="me-auto">Success</strong>
					<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
				</div>
				<div class="toast-body">
					Farm details have been updated and saved.
				</div>
			</div>
			<div id="delSuccessToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
				<div class="toast-header">
					<strong class="me-auto">Success</strong>
					<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
				</div>
				<div class="toast-body">
					3D rendering cache deleted.
				</div>
			</div>
			<div id="delFailToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
				<div class="toast-header">
					<strong class="me-auto">Failure</strong>
					<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
				</div>
				<div class="toast-body">
					There was an issue when trying to delete the 3D rendering cache.
				</div>
			</div>
		</div>
	</div>
</body>
</html>
